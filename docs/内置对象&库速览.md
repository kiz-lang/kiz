# 内置对象&库速览

**目录**
- [Builtins库](#Builtins库)
- [OS库](#OS库)
- [Hello库](#Hello库)

## Builtins库
### Object
- `__call__`方法：创建空对象
- `__dstr__()`方法：返回调试字符串
- `__getitem__(attr_name)`方法：返回该对象名字为attr_name的属性
- `__setitem__(attr_name, value)`方法：设置该对象名字为attr_name的属性的值为value

### Bool
- `__call__(obj)`方法：调用obj的`__bool__`方法(该方法通常返回Bool)来创建Bool对象
- `__hash__()`方法：True返回1，False返回0
- `__dstr__()`方法：返回调试字符串

### Nil
- `__hash__()`方法：永远返回0
- `__dstr__()`方法：返回调试字符串

### Str
- `__call__(obj)`方法：调用obj的`__str__`方法(该方法通常返回Str)来创建Str对象
- `__dstr__()`方法：返回调试字符串
- `__str__()`方法：返回自身
- `__next__()`方法：迭代器直到字符串结束
- `__hash__()`方法：哈希字符串
- `__eq__()`方法：判断字符串相等
- `__bool__()`方法：空字符串返回False，否则返回True
- `__add__(another)`方法：字符串拼接，返回新字符串
- `__mul__(another)`方法：字符串重复，返回新字符串
- `__getitem__(n)`方法：字符串第n项的字符(utf-8支持)
- `startswith(t)`方法：判断字符串是否以t开头
- `endswith(t)`方法：判断字符串是否以t结尾
- `format(...)`方法：把字符串中`{}`依次替换为实际参数，如果`{}`比参数列表多则保留`{}`
- `len()`方法：返回字符串长度(utf-8支持)
- `isalaph()`方法：判断是否是字母(utf-8支持)
- `isdigit()`方法：判断是否是数字
- `count(n)`方法：计数n在字符串中出现的次数
- `foreach(f)`方法：遍历字符串并用当前字符作为第一个实际参数调用f
- `contains(a)`方法：判断字符串是否包含a
- `to_upper()`方法：转大写
- `to_lower()`方法：转小写
- `substr(start, len)`方法：截取start~end为新字符串

---

### Int
**注**: Int类型的包含another形式参数的方法兼容Decimal类型的数据
- `__call__(obj)`方法：调用obj的`__int__`方法来创建Int对象
- `__dstr__()`方法：返回调试字符串
- `__str__()`方法：返回整数的字符串表示
- `__bool__()`方法：0返回False，非0返回True
- `__hash__()`方法：返回整数自身作为哈希值
- `__eq__(another)`方法：判断整数是否相等
- `__lt__(another)`方法：判断是否小于another
- `__gt__(another)`方法：判断是否大于another
- `__add__(another)`方法：整数加法，返回新Int
- `__sub__(another)`方法：整数减法，返回新Int
- `__mul__(another)`方法：整数乘法，返回新Int
- `__div__(another)`方法：整数除法，返回新Decimal
- `__pow__(another)`方法：整数幂运算，返回新Int
- `__mod__(another)`方法：整数取模，返回新Int
- `__neg__()`方法：整数取负，返回新Int

---

### Decimal
**注**: Decimal类型的包含another形式参数的方法兼容Int类型的数据
- `__call__(obj)`方法：调用obj的`__decimal__`方法来创建Decimal对象
- `__dstr__()`方法：返回调试字符串
- `__str__()`方法：返回小数的字符串表示
- `__bool__()`方法：0返回False，非0返回True
- `__hash__()`方法：返回Decimal的哈希值
- `__eq__(another)`方法：判断Decimal是否相等
- `__lt__(another)`方法：判断是否小于another
- `__gt__(another)`方法：判断是否大于another
- `__add__(another)`方法：Decimal加法，返回新Decimal
- `__sub__(another)`方法：Decimal减法，返回新Decimal
- `__mul__(another)`方法：Decimal乘法，返回新Decimal
- `__div__(another)`方法：Decimal除法，返回新Decimal
- `__pow__(another)`方法：Decimal幂运算，返回新Decimal
- `__neg__()`方法：Decimal取负，返回新Decimal
- `approx(another, n)`方法：和another在小数点后n位进行等于运算
- `round_div(n)`方法：除法，除不尽时在第n位四舍五入
- `limit_div(n)`方法：除法，除不尽时在第n位截断

---

### Dict
- `__dstr__()`方法：返回调试字符串
- `__str__()`方法：返回字典的普通字符串表示
- `__eq__(another)`方法：判断字典键值对是否完全相等
- `__add__(another)`方法：合并两个字典，冲突键以后者为准，返回新Dict
- `__contains__(key)`方法：判断字典是否包含指定key
- `__getitem__(key)`方法：根据key获取对应value
- `__setitem__(key, value)`方法：设置字典key对应的value

---

### List
- `__dstr__()`方法：返回调试字符串
- `__str__()`方法：返回列表的普通字符串表示
- `__call__(iterable)`方法：从可迭代对象创建新List
- `__bool__()`方法：空列表返回False，非空返回True
- `__eq__(another)`方法：判断列表元素与顺序是否完全相等
- `__add__(another)`方法：列表拼接，返回新List
- `__mul__(times)`方法：列表重复，返回新List
- `__next__()`方法：列表迭代器，逐个返回元素
- `__getitem__(index)`方法：按下标获取列表元素
- `__setitem__(index, value)`方法：按下标设置列表元素
- `len()`方法：返回列表长度
- `contains(item)`方法：判断列表是否包含item
- `append(item)`方法：向列表末尾添加元素
- `foreach(func)`方法：遍历列表，用每个元素调用func
- `reverse()`方法：反转列表，原地修改
- `extend(other_list)`方法：将other_list元素追加到当前列表
- `pop(index)`方法：删除并返回指定下标的元素
- `insert(index, item)`方法：在指定下标插入元素
- `find(item)`方法：查找item第一次出现的下标，未找到返回-1
- `map(func)`方法：对每个元素执行func，返回新List
- `filter(func)`方法：过滤出满足func条件的元素，返回新List
- `count(item)`方法：统计item在列表中出现的次数
- `join(sep_str)`方法：用分隔符将列表元素拼接为字符串

---

### Func
- `__dstr__()`方法：返回调试字符串

### NFunc
- `__dstr__()`方法：返回调试字符串

### Error
- `__dstr__()`方法：返回调试字符串

### Module
- `__dstr__()`方法：返回调试字符串

### __CodeObject
无方法或属性

### __StopIterSignal__
无方法或属性
在迭代器完毕时, 返回该对象表示结束迭代

### Range
- `__call__(end)`方法：返回一个Range迭代器(0~end)不包含end, 间隔1
- `__call__(start, end)`方法：返回一个Range迭代器(start~end)不包含end, 间隔1
- `__call__(start, step, end)`方法：返回一个Range迭代器(start~end)不包含end, 间隔step
- `start`属性：起始整数
- `end`属性：终止整数
- `step`属性：步长整数
- `current`属性：当前整数

### FileHandle
- `mode`属性：获取打开文件的模式(r/w/a/r+/w+)
- `path`属性：获取打开文件的路径
- `read()`方法：阅读文件
- `write()`方法：写入文件(w模式下是覆盖, a模式下是追加)
- `close()`方法：关闭文件，释放文件句柄

### print
- `print(...)`函数：依次调用对象`__str__`方法打印到控制台，自动换行

### input
- `input()`函数：获取一行控制台输入
- `input(prompt)`函数：打印prompt后(无换行)，获取一行控制台输入

### cmd
- `cmd(command)`函数：执行command中的命令(调用c++ std::system函数)

### create
- `create(src)`函数：创建一个空对象，`__parent__`属性指向src
- `create()`函数：创建一个空对象，`__parent__`属性指向Object

### help
- `help()`函数：打印帮助

### ischild
- `ischild(a, b)`函数：判断a的原型链上有没有b

### type_of
- `type_of(obj)`函数：判断obj的类型(返回字符串)
**注**: 返回值有且只有如下情况：`Object Int Str Decimal List Dict Bool Nil CodeObject Func NFunc Module FileHandle <Unknown>`

### now
- `now()`函数：返回当前的时间戳(单位：ns, Int类型)

### breakpoint
- `breakpoint`函数：简易断点

### sleep
- `sleep(t)`函数：暂停t(Int类型) ms

### get_refc
- `get_refc(obj)`函数：获取对象的引用计数

### getattr
- `getattr(obj, name)`函数：获取对象指定名称的属性
- `getattr(current_only, obj, name)`函数：获取对象指定名称的属性(通过current_only开关确定要不要按原型链向上查找)

### setattr
- `setattr(obj, name, value)`函数：设置对象指定名称的属性

### delattr
- `delattr(obj, name)`函数：删除对象指定名称的属性

### hasattr
- `hasattr(obj, name)`函数：判断对象是否存在指定名称的属性(通过current_only开关确定要不要按原型链向上查找)

### attr
- `attr(obj)`函数：返回对象的属性表(Dict类型)

### debug_str
- `debug_str(obj)`函数：调用对象的`__dstr__`方法，返回Str

### range
- `range(end)`函数：生成0~end的迭代器(不含end)，步长1
- `range(start, end)`函数：生成start~end的迭代器(不含end)，步长1
- `range(start, step, end)`函数：生成start~end的迭代器(不含end)，步长step

### open
- `open(path, mode)`函数：返回一个操作模式为mode(支持r/w/a/r+/w+)的FileHandle对象

## OS库
### argv
- `os.argv()`函数：获取kiz执行该文件的剩余参数(返回List)
### env
- `os.env()`函数：获取系统环境变量(返回Dict)
### mkdir
- `os.mkdir(path)`函数：在path创建一个目录
### cwd
- `os.cwd()`函数：获取当前工作目录
### chdir
- `os.chdir(path)`函数：切换目录到path
### exit
- `os.exit()`函数：退出程序，退出代码1
- `os.exit(n)`函数：退出程序，退出代码n
### rmdir
- `os.rmdir(path)`函数：删除目录path
### remove
- `os.remove(path)`函数：删除文件path

## Hello库
- `__call__()`函数：在控制台打印欢迎信息

---
author: *azhz1107cat*